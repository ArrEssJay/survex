<refmeta>
<refentrytitle>caverot</refentrytitle>
<manvolnum>1</manvolnum>
</refmeta>

<refnamediv>
<refname>caverot</refname>
<refpurpose>display &x3d; files on screen
</refpurpose>
</refnamediv>

<refsynopsisdiv>
<cmdsynopsis>
<command>caverot</command>
<!-- FIXME: change to use GNU getopt -->
<arg choice="opt">
  <option>options</option>
</arg>
<arg choice="opt" rep="repeat">.3d file</arg> <!--FIXME-->
</cmdsynopsis>
</refsynopsisdiv>

<refsect1><title>Description</title>

<Para>
Caverot displays &x3d; files on screen and allows you to manipulate
the view to understand the cave.
Aven is a GUI caverot replacement which supports most of
caverot's mouse and keyboard controls but offers many additional
features.
</Para>

<!-- FIXME: reword
<Para>More exactly, when specifying colours for the files read in it is:
</Para>

<cmdsynopsis>
    <command>caverot</command>
    <arg>-c&lt;col1&gt;,&lt;col2&gt;,...,&lt;coln&gt;</arg>
    <arg>&lt;file1&gt;.3d &lt;file2&gt;.3d ... &lt;filen&gt;.3d</arg>
</cmdsynopsis>
-->

<Para>
The &msdos; version of caverot for 286 and earlier machines works with
a wide range of graphics cards, and typically provides resolutions up
to 640x480.  Usually two copies of the screen are used, and one is
drawn on while the other is displayed, to give smoother animation.
Where the hardware does not allow this you may notice a flickering or
flashing during movement which since you can see the screen being
redrawn.
</Para>

<Para>
The standard &msdos; version can work with higher resolution screen
modes, and always draws into a buffer which is then copied to the
screen.  It tries to pick a suitable screen mode, but if this fails
you can bring up a dialog to choose a screen mode from by using the
--mode-picker command line option.
<!-- FIXME fettle this in:
This version doesn't run well under NT.  NT limits access to the
graphics hardware, and emulates VGA, so the best resolution is
320x200.  There are also other niggles (e.g. on an NT 4 server,
the mouse works in the mode-picker, but not in caverot itself).
[If you're running NT use the MS Windows version which comes with a
more sophisticated cave viewer called aven.
-->
</Para>

<Para>
The &riscos; version will pick the highest resolution screen mode that
it can use two copies of the screen in, and that will work on the
monitor in use. It will also use three bank animation for an even more
flicker-free display if there is enough RAM.
</Para>

<Para>
CAVEROT reads in the data and then displays a help screen listing the
control keys/mouse buttons.  Hitting a key gives the default view.
This is a plan scaled to fit on the screen, with no labels or station
crosses. The view can be panned, rotated, zoomed, tilted, or set
spinning.  This should be fast enough to be almost instant with all
but the largest surveys on the slowest of hardware. Pressing
<keycap/H/ at any point will give you the help again.  <keycap/Escape/
exits the program.
</Para>

<refsect2><Title>Colours and multiple data files</Title>
<!-- FIXME: move up? -->
<Para>Caverot can read in multiple data files and display them in separate
colours.
</Para>

<Para>The syntax is given above. E.g. <command/caverot -c2,6 cave.3d
surface.3d/ would display <filename/cave.3d/ in colour 2 and
<filename/surface.3d/ in colour 6. If you do not specify colours, a
predefined set is used.</Para>

<Para>Colour values range between 0 (black) and 255 (white) - experiment
to find which colours you like.
</Para>

<Para>Note that there is no perspective in the view. This means that
it is impossible to tell which way round a cave is rotating, or
whether you are viewing something from behind, or in front. So
if you think the direction of rotation in wrong, or changes as
you watch, this is just your brain being confused, not a bug!
</Para>

</refsect2>

<refsect2><Title>Mouse control</Title>

<Para>
The best way to move the cave is with the mouse. If you hold down the
right button then the cave is dragged when you move the mouse. If you
hold down the left button, then the cave is rotated if you move left
or right, and zoomed if you move up and down.
If your mouse has a middle button (and it is recognised by your mouse
driver) then you can use it to tilt the cave.
</Para>

<Para>
By default the mouse moves the cave, but if you press <keycap/Ctrl-R/,
then the mouse will move the viewpoint instead (i.e. everything will
go in the opposite direction. This seems more natural to some people.
</Para>

</refsect2>

<refsect2><Title>Keyboard Control</Title>

<Para><keycap/P/ and <keycap/L/ select Plan and eLevation
respectively.  Changing between plan to elevation is animated to help
you see where you are and how things relate. This animation is
automatically disabled on slow machines to avoid user frustration.
</Para>

<Para>
Comma <keycap/,/, and Slash <keycap>/</keycap> tilt up
and down respectively. Tilt goes 180 degrees from plan view to a view
from directly below (upside down plan).
</Para>

<Para>
Enter starts the cave spinning, and <keycap/Space/ stops it. The
speed of rotation for this, and tilt, is controlled by <keycap/Z/ and
<keycap/X/.
</Para>

<Para>Crosses and/or labels can be displayed at survey stations.
<keycap/Ctrl-X/ toggles crosses and <keycap/Ctrl-N/ station names.
<keycap/Ctrl-L/ toggles the display of survey legs.
</Para>

<para>By default, labels and crosses are not redrawn during
movement, to improve responsiveness.  With a small cave, or a fast
computer, you can enable redraw of everything during movement with
<keycap/Ctrl-A/.  <keycap/Ctrl-O/ toggles whether all names are
displayed, or only non-overlapping ones.
</para>

<para><keycap/Delete/ is useful if you get lost - it resets the scale,
position, and rotation speed, so that the cave returns to the centre
of the screen. There are also keyboard controls to use instead of the
mouse - <keycap/Shift/ helps here as it accelerates all movements:
</para>

<screen>
<keycap/Z/, <keycap/X/ : Faster/Slower Rotation
<keycap/R/: Reverse direction of rotation
<keycap/Enter/, <keycap/Space/: Start and stop auto-rotation
<keycap/C/, <keycap/V/: Rotate cave one step clockwise/anti-clockwise
<keycap/'/ , <keycap>/</keycap>: Higher/Lower Viewpoint
<keycap/]/ , <keycap/[/: Zoom in/Out
<keycap/U/, <keycap/D/: Set view to Up/Down
<keycap/N/, <keycap/S/, <keycap/E/, <keycap/W/: Set view to North, South, East, West
<keycap/Delete/: Reset to default scale, rotation rate, etc
<keycap/P/, <keycap/L/: Plan, Elevation
<keycap/Cursor Left/, <keycap/Cursor Right/: Pan survey Left/Right (on screen)
<keycap/Cursor Up/, <keycap/Cursor Down/: Pan survey Up/Down (on screen)
<keycap/Ctrl-N/: Toggle display of station names
<keycap/Ctrl-X/: Toggle display of crosses at stations
<keycap/Ctrl-L/: Toggle display of survey legs
<keycap/Ctrl-F/: Toggle display of surface legs
<keycap/Ctrl-A/: Toggle display of All/skeleton when moving
<keycap/O/: Toggle display of non-overlapping/all names
<keycap/Ctrl-R/: reverse sense of controls
<keycap/Escape/: quit program
<keycap/Shift/: accelerates all movement keys
<keycap/H/:  help screen giving these controls
</screen>

<Para>A little experimentation should give a better understanding of how
this works.
</Para>

<Para>There is an auto-resizing scale bar on the left side of the screen.
This varies in length as you zoom in or out.  The current length is given
just below the bearing. In the top left corner the current direction of view
(for elevations), or direction up the screen (for plans) is
displayed. In the top right is a compass pointer showing which way
is North, and in the bottom right is a clino pointer showing the angle
of tilt.
</Para>

<!-- FIXME:
<Para>Note that Extended Elevations (which are always totally flat
east-west) are noticed by caverot, and it will prevent their being
rotated, as this is meaningless.
</Para>
-->

</refsect2>

</refsect1>
