Changes in 1.0.30:

* aven: Added printing directly from Aven!

* aven: Fixed memory leak when showing the "About" dialog.

* (MacOS X version): Now installable from a disk image package.

* cavern: Equates are no longer considered when deciding which stations are
  flagged as surface and underground.

* Romanian translation mostly completed.

* (Unix version): Debian: Minor packaging tweaks.

Changes in 1.0.29:

* cad3d: Fixed problem with DXF files which stopped them loading with some
  drawing packages (introduced in 1.0.27).

* aven: Changed File->Exit to File->Quit.

* Removed some unused messages from the message files.

* (Unix version): Fixed SRPMs to build on RedHat 9 and Fedora Core 1 (patch
  from John Pybus).

* Romanian translation started.

* (Unix version): Debian: Fixed new lintian warnings about missing quotes in
  menu files.

Changes in 1.0.28:

* Fixed 3d file reading code to fix incorrect unpacking of compressed station
  names in a rare case.  Also checked other rare cases work correctly.

Changes in 1.0.27:

* cad3d: DXF output now puts surface legs, stations, and labels in separate
  layers.

* (Unix version): distribute desc-svxedit.txt.

Changes in 1.0.26:

* cavern: Fixed interleaved topofil data style - the length was always being
  calculated as zero.

* (Unix version): aven: "All Files" now shows files without extensions too.

* aven: added Ctrl+Q as shortcut for File->Exit.

* aven: depth colouring now uses a proper colour gradient.

* (MacOS X version): aven: the keyboard and mouse now work!  It turns out that
  we must apply resources *after* installing.

* (MacOS X version): aven: now works when run from the MacOS X Finder.

* (MacOS X version): look for message files and other resources relative to the
  binaries so that the user can install Survex from a disk image in the location
  of their choice.

* (MacOS X version): fixed not to try to build aven if wxWindows isn't
  installed.

* cad3d: fixed -e and -r options to not crash (the long versions have always
  worked).

* extend: fixed to initialise an internal structure - failing to do so was
  probably causing crashes on some platforms.

* Fixed standard graphics for "Note", "Warning", etc in the PostScript manual.

* Documentation updated.

* (Unix version): fixed svxedit man page which previously contained xcaverot
  documentation!

* test suite: check that cavern doesn't report "nan" or "NaN" for any values.

* (Unix version): fixed configure --enable-defaultlang=XX to work.

* (Unix version): fixed configure code to turn on lots of GCC warnings and fixed
  most of them.

* (MS Windows version): assorted tweaks to allow building with MS Visual C/C++.

Changes in 1.0.25:

* (MacOS X version): hopefully fixed building of aven.

* (Unix version): updated config.guess and config.sub so should build out of
  the box on more Unix platforms.

* (Unix version): Debian: added missing Build-Depends on xlibs-dev.

* (Unix version): RPMs: give up supplying binary RPMs due to apparently
  insurmountable technical problems.
  
Changes in 1.0.24:

* cavern: fixed LEVEL (broken since around 1.0.8) and added test case.

* cavern: corrected handling of declination in Compass DAT files and added test
  case; also added tests for other aspects of Compass DAT file reading.

* printps/printpcl: fixed blank page detection in some obscure cases.

* Documentation: started manual section on working with Compass data files.

* (Unix version): fixed compilation problems with aven and getopt.h on MacOS X
  (and probably some other Unix versions).

* (Unix version): Debian package now Build-Depends on gcc-3.2 and g++-3.2.

Changes in 1.0.23:

* Documentation: include 3d v3 file format description on MS Windows, MS DOS,
  and RISC OS too; include PNG graphics for manual on MS Windows; minor updates
  to manual.

* Prefer wxWindows 2.4 if it's available.

* (MacOS X version): detect MacOS X and look for MacOS X build of wxWindows;
  automatically add resource fork to aven binary.

* Disabled experimental support for Chinese (LANG=zh) - it isn't currently
  working and makes the printer drivers unusable on Chinese versions of MS
  Windows.

* (Unix version): tweaked debian packaging.

* cavern: Handling of "*:" at start of file wasn't fully fixed in 1.0.19.

Changes in 1.0.22:

* aven: Fixed handling of extended elevations (and other flat surveys) -
  they are meant to be "locked flat" but this wasn't fully working before.

* Documentation: 3d v3 file format description: fixed error in description of
  codes 0x01-0x0e; include it in binary packages (not only with the source
  code).

Changes in 1.0.21:

* cavern: when reading Compass DAT files, we now processes compass and clino
  backsights, and recognise the "X" flag which indicates a leg should be
  entirely ignored.  And we now report correct line number with errors in
  Compass .MAK files.

* cavern: if "*infer plumbs on", don't infer a plumb if the clino is
  +/- 90 degrees, but the backclino isn't (and vice versa).

* cavern: fixed 3dx output so it actually works with Chasm once more.

* cavern: don't allocate extra space needed for producing 3dx output for
  Chasm unless we're actually producing that output - saves about 8 bytes
  per station.

* cavern: removed slightly too keen sanity check which could misfire in very
  unusual circumstances.

* (MS Windows version): all .ico files except 3d.ico have been missing since
  1.0.17 (or maybe 1.0.16) - fixed.  You wouldn't notice this if you installed
  over an previous version.

Changes in 1.0.20:

* aven: update display when "Metric" or "Degrees" is toggled.

* cavern: fixed handling of compass and clino corrections in Compass survey
  data - these were interpreted as radians rather than degrees so the
  correction was about 57 times too large!)

* Improved handling of Compass PLT files - if the survey name is empty, don't
  insert a survey separator character.

* Documentation: fixed incorrect markup which resulted in a bogus footnote.

Changes in 1.0.19:

* cavern: you can now process Compass format survey data (.DAT and .MAK files) -
  these can even be linked into a Survex dataset with "*include fulford.dat" or
  "*include lech.mak" to allow processing of mixed datasets.

* cavern: major speedup (up to 60%) when reading in survey data containing
  a lot of stations in the same survey hierarchy level (which is how Compass
  files are handled).

* cavern: don't warn about a compass reading on a plumbed leg if the
  plumb was inferred and the compass reading is zero.

* cavern: reduced memory usage in code which reads a survey station name.

* cavern: reported CPU time would go negative if cavern ran for more than
  about 36 minutes (highly unlikely but not impossible on a slow machine
  with a large, highly interconnect survey) - fixed.

* cavern: avoid unnecessary work when --percentage isn't specified.

* cavern: Writing "*:" at the start of a .svx file would crash cavern - fixed
  and added test case.  This is an error anyway, but it shouldn't cause a
  crash.

* Don't distribute unused toolbar icons.

* Documentation: minor updates.

Changes in 1.0.18:

* (Unix version): Fixed "Process" action on .svx files.

* (Unix version): File associations: if svxedit isn't installed, run gnome-edit
  instead.

* (Unix version): In Debian packages, now include file associations and file
  icons in the survex package rather than survex-aven.

* (Unix version): File associations were missing from RPM packages; moved
  aven and svxedit man pages to their respective subpackages; moved aven icons
  to the aven subpackage.

* Documentation: added details of the 3d file format (version 3).

* Updated TODO list.

Changes in 1.0.17:

* (MS Windows version): Fixed "Open in SvxEdit" to work (and if tcl isn't
  install this action now falls back to using notepad).  SvxEdit now has
  its own icon.

* (Unix version): Install mime types, icons, and file associations for Gnome.
  Note: at present GMC doesn't seem to notice new files being created (e.g.
  Process on a .svx file creates .3d and .err files) - you have to manually
  refresh the view.

* Minor update to manual.

Changes in 1.0.16:

* (MS Windows version): Really fixed bug introduced in 1.0.14 which often stops
  programs from finding the message files.

* (MS Windows version): Remove any existing "Open" file association for .svx
  files.

Changes in 1.0.15:

* (MS Windows version): Fixed bug introduced in 1.0.14 which often stops
  programs from finding the message files.

* (MS Windows version): "Open in Notepad" is now the double-click action
  for .svx files once again, "Open in SvxEdit" is an action in the menu
  obtained with the right mouse button.

Changes in 1.0.14:

* svxedit: This is a Survex data entry editor from the therion team.  It needs
  tcl and wish installed - for MS Windows an installer is available for free
  from Activeware.

* Improved handling of Compass PLT files and CMAP xyz files - no longer change
  dots to spaces in survey and station names - instead use a space as the
  separator between survey name and station name.

* aven: when picking non-overlapping labels, show a slight preference to shorter
  labels with the aim of displaying more labels.

* aven: fixed hard to notice problem which could cause the cave to appear
  tilted sideways after a lot of manipulation.

* cavern: Modest speed improvement (0.5% for sample dataset).

* cavern: fixed a rarely sighted bug which caused erroneous error about some
  stations not being attached to a fixed point.

* cavern: fixed clino readings and DIRECTION to work in interleaved data.

* cavern: improved error reporting when an invalid value is given for a
  DIRECTION reading.

* cavern: fixed "singular matrix" error when very low SDs were specified.

* print*: if the --raw is used, the survey can now use the space this would
  have taken up.

* Reading of ASCII 3d files now copes with MSDOS/MS Windows line endings
  once again.  Added regression test for this.

* (MS Windows version): Programs run from the command line now find message
  files without SURVEXHOME needing to be set.

* Updated documentation.

Changes in 1.0.13:

* aven: Fixed bug which caused the occasional spurious leg to be shown
  connecting arbitrary stations.

* extend: try to extend along a survey, and make breaks where other surveys
  join.

* cavern: Number reading code reworked to allow repeat readings to be
  supported, but the actual repeat reading code is currently disabled,
  and everything should work exactly as before.

* Experimental support for Chinese (LANG=zh) - only a few messages are
  currently translated.

Changes in 1.0.12:

* diffpos: fixed to work on 64bit architectures.

* sorterr: fixed to work with more than 1024 traverses.

* Fixed handling of iso-8859-2 character set and MS Windows code page 1250
  (both cover Eastern European languages).

* (MS Windows version): install file associations for Compass .plt and .plf
  files and for CMAP .xyz files.  Also install the file icon for .plt and
  .plf files in case Compass isn't installed (thanks to Larry Fish for
  permission to include the icon).

* (Unix version): running an installed program with an explicit path works
  again.

* (Unix version): xcaverot: automatically switch on PDA mode if the screen is
  less than 640 pixels wide or less than 480 pixels high.

* (Unix version): minor portability improvements.

* Updates to Portuguese translation - all translations are now up-to-date.

Changes in 1.0.11:

* aven: improvements in 1.0.10 to the file type selector only work properly
  on MS Windows, and with wxGtk >= 2.3 on Unix (the latest stable release is
  2.2.9 where this doesn't work).  Fixed to work as well as possible on 2.2.9,
  and as intended on 2.3.

* aven: fixed so that loading PLT files works regardless of the current locale
  (previously it would fail for locales where the decimal character wasn't
  '.').

* aven: key actions during autorotation no longer temporarily pause
  autorotation.

* aven: switching to plan or elevation while rotating is now smooth.

* aven: removed undocumented and confusing "free rotation mode".

* (MS Windows version): aven: focus now set correctly after loading a file by
  double-clicking or from the command line.

* cad3d: write dummy passage dimensions to .plt files to avoid Compass bug.

* printwin/printps: now support coloured printouts.

* print*: fixed to work correctly with PLT files.

* extend: fixed to work correctly with PLT files.

* Updates to Italian translation.

* Minor documentation updates.

Changes in 1.0.10:

* (MS Windows version): aven: fixed assert failure upon turning on station
  names.

* aven: only add a file to the list of recently used files if it was opened
  successfully.

* aven: recognise ".plf" as a Compass PLT file too; and on Unix list "*.PLT",
  "*.PLF", "*.XYZ", and "*.3D" as well as the lowercase versions to help people
  who transfer files from MSDOS/MS Windows.

* cavern: fixed bogus warning triggered by "*begin abc.def" (I'm not sure
  that this should be valid, but the warning given wasn't appropriate).

* Fixed scaling problem when reading PLT file (feet->metres conversion
  factor was being applied backwards!)

* Fixed potential problem when reading or writing a 3d file which couldn't
  be opened.

* Translate dots to spaces in survey names in Compass PLT files.

* Better handling of PLT files which have a D command before any M command.

* Updates to German and Italian translations.

Changes in 1.0.9:

* aven: Fixed jerky start when auto-rotation begins.

* cavern: Fixed Direction reading - bug previously made it unusable.

* (MS Windows version): cad3d: fixed broken PLT output (had a double CR at the
  end of each line).

* (Unix version): RPMs now have the docs in /usr/share/doc and the man pages
  in /usr/share/man to conform with the FHS (and where RedHat packages put
  them).

* Updates to French, Spanish, Catalan, and Slovak translations.

Changes in 1.0.8:

* Slovak translation added; updated German, Catalan, and Spanish translations.

* aven: reduced memory usage by around 25% and increased speed and
  responsiveness.

* aven: rate of rotation and switching between plan and elevation now adjusted
  to the speed of redraw, so aven behaves in a similar way independent of the
  speed of the computer or size of the survey.

* aven: provide list of most recently loaded files (preserved between runs of
  the program).

* aven: settings for "Metric" and "Degrees" are preserved between runs.

* aven: moved some menu items from "View" to "Controls" as they probably
  belong there and the "View" menu was getting out of hand.

* aven: cursor keys now translate cave in the same way the mouse does (i.e. now
  work as in caverot and xcaverot).

* aven: eliminated the "twinkling label" effect when dragging the cave with the
  right mouse button.

* aven: the measuring line moves much more smoothly now: the mouse cursor now
  snaps to the nearest station, rather than just a near station; and when the
  line moves, we now only redraw the affected area of the window.

* aven: resolved annoying limit on zooming in on large surveys.  This was a
  crude way of preventing random lines due to overflow in the windowing system.
  Aven now clips lines itself at high zoom levels, and limits zoom in to
  approximately 1mm/pixel.

* aven: zoom in/out with keyboard wasn't subject to any limits - now restricted
  to sane values as with zoom in/out with the mouse.

* print*: added --raw switch to turn of info box, scale bar, and page footer.
  This can be useful if you want to import the output into another application.
  
* print*: improved output when --no-border is used.

* printpcl/printdm: Added new .ini setting "font_bitmap" which allows the user
  to choose between alternative fonts.  Current we supply "default" and "bold".

* printps/printhpgl: Fixed --skip-blanks which would incorrectly skip non-blank
  pages on rare occasions.

* cavern: added support for BackCompass and BackClino.

* cavern: implemented "*units clino percent".

* cavern: added "*infer exports on".  Any stations seen while this is on will
  have the necessary *export-s inferred when accessed from outside their
  own survey.  This allows linking a survey which uses *export to one which
  doesn't.  It's also useful for a maze cave where so many stations can
  be linked to that listing them explicitly isn't desirable.

* cavern: N-S, E-W, and vertical ranges now only count stations which are in
  underground surveys.

* cavern: *infer plumbs wasn't inferring -90 to be DOWN - fixed.

* cavern: *infer was giving an internal error if the argument was unknown -
  now it gives the correct error message.

* cavern: fixed handling of omitted clino readings when OMIT is *set to be
  different from MINUS and PLUS (new test omitclino).

* cavern: fixed a bogus warning for any station which was only used in a line
  of data which was rejected because of an error.

* cavern: added error if the *units factor is zero (e.g. "*units tape 0 feet").

* cavern: removed the ill-thought-out and never implemented LENGTHOUTPUT
  and ANGLEOUTPUT quantities.

* cavern: resolved mismatch between bcra5.svx and the default SDs, and the
  odd values in bcra3.svx.  We are now interpreting the BCRA limits as 2
  standard deviations (previously bcra5.svx used 3 sds, bcra3 used 3.33 sds for
  tape and position, and .75 sds for compass and clino, and cavern used 1 sd
  by default).

* ChangeLog now only includes entries since the previous release (the full file
  is 220K or so, and of interest to very few people).  MSDOS and MS Windows
  versions now comfortably fit on a 1.44M floppy once again.

* Test suite now checks that all programs will run successfully with "--help"
  and with "--version".  This should avoid problems such as that which broke
  the printer drivers in 1.0.4-1.0.6.

* (Unix version): uninstalled binaries now use the path they are run with to
  find support files, which means SURVEXHOME is no longer required, and has
  been removed.

Changes in 1.0.7:

* print*: halted with a failed assertion in 1.0.4-1.0.6.

Changes in 1.0.6:

* aven: "Reverse Controls" now works as in xcaverot and caverot.

* aven: free rotation mode (engage by pressing control while left dragging,
  exit with Delete) improved.

* aven: using File->Open when a file was already loaded caused a crash
  if a station was "grey highlighted" in the survey tree - fixed.

* aven: added hourglass for "find" operation.

* aven: reenabled loading of files by drag-and-drop (accidentally disabled
  in 1.0.4 and 1.0.5).

* aven: improved handling of flat surveys (e.g. output of extend, surveys
  with no clino information).

* aven: surveys with stations but no legs no longer cause the labels and
  crosses buttons to behave oddly.

* aven: removed quite a bit of unused and superfluous code.

* Spell-checked documentation.

Changes in 1.0.5:

* Fixed bug in img_open_survey() which could cause a crash if you tried to
  open an unrecognised file (i.e. not .3d, .pos, .plt, or .xyz format).

* North and East were the wrong way round when reading in .plt files.

* cad3d: Improved .plt file output a little - there's probably enough file
  structure for Compass to read them now.

* Documentation updates.

Changes in 1.0.4:

* extend: previously only kept one name for an equated group of stations in the
  extended .3d file; now keeps all the names.

* cad3d: if an output filename is given, use its extension to pick the default
  output format.

* aven: movement with keyboard is now accelerated by Shift as in caverot.

* print*: --no-borders fixed to work as documented; --no-cutlines added to
  turn off the dashed lines where pages join on multi-page printouts.

* aven: tracked down two uninitialised variables which seems to fix the
  failure to load a survey on startup which some people have been experiencing
  on Microsoft Windows.

* aven: code cleaned up - should improve performance a little.

* img routines: img_rewind() now returns a value indicating success/failure.

* Improvements to .plt file reading, notably that distances in the file are
  now interpreted as being in feet rather than metres.  Also .plt files should
  now be recognised even with a different extension, and we cope with an odd
  special case better.

* Added support for reading CMAP XYZ files.  There are two variants of these
  - the "shot" format is fully implemented, the "station" format currently
  just reads the station names and positions - the legs are ignored (sadly
  the sample files I have do not match the format specification).

* (MacOS X version): aven: aven now builds on MacOS X - we just need to sort
  out packaging now...

* (MSDOS version): upgraded graphics library used to Allegro 4.0.1.

* Documentation updates.

Changes in 1.0.3:

* aven: you can now select distances to be displayed in feet (or miles when
  you zoom right out) instead of metres, and angles to be in grads instead
  of degrees.

* aven: show altitude of mouse pointer when in elevation view.

* cad3d: fixed bug which caused --plt to crash on some platforms.

* print*: added "Printing to `XXX'..." message to say where output is being
  written.

* Updated French translation; minor updates to other translations (mostly
  sorting out clashing menu shortcuts in aven).

* (Unix version): assorted portability tweaks.

Changes in 1.0.2:

* printdm/printpcl/printwin: take notice of font_size_labels setting in
  print.ini etc.

* cavern: Topofil can now be used with DIVING and CYLPOLAR styles; TOPOFIL
  style is now synonymous with NORMAL.

* cavern: *INFER EQUATES and *DATA TOPOFIL now work together correctly.

* cavern: *FIX with 3 standard deviations but no covariances now works.

* (MacOS X version): command line programs now build.  We're working on Aven.

* Updates to the Catalan and Spanish translations.

* xcaverot: documented environmental variables XCAVEROT_INDICATOR_RADIUS and
  XCAVEROT_FONTNAME.

* cad3d: added --plt option to produce crude approximation to Compass .plt
  files - should be good enough for reading into Carto.

* img library enhanced to allow Compass .plt files to be read as if they were
  .3d files.

Changes in 1.0.1:

* (MS Windows version): printwin: fixed sizes of cross and page alignment
  ticks.

* Updates to the Portuguese and Italian translations.

Changes in 1.0.0:

* Fixed --survey option supported by many programs which was broken in 0.99.

* aven: altered colours of "fixed points" and "entrances" buttons to match
  the coloured blobs used to indicate them.

* (MS Windows version): aven: changed current point highlighting in the
  survey tree to use a light grey background rather than bold (bold causes
  the text to "wriggle" as the highlight runs up or down).

* (MS Windows version): file icons now have transparent backgrounds.

* survex: removed conversion wrapper - you should use "cavern file.svx"
  instead of "survex file.svx".

* (Unix version): GCC 2.95 sometimes fails with an internal error when trying
  to compile gfxcore.cc - if it does, the Makefile will now try recompiling
  with a lower optimisation level.

* (Unix version): when doing an "in directory" build from source, the HTML
  manual is now installed in its own subdirectory as when doing a non
  "in directory" build.

* German translation now completely up-to-date.
