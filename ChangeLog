Wed Sep 21 00:29:31 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* lib/fixmsgs.pl: Update to fix UTF-8 rather than ISO8859-1.

Wed Sep 21 00:20:26 GMT 2011  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Make wx version and toolkit info a single string at
	  compile time, like we do on trunk.

Wed Sep 21 00:15:07 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* survex.spec.in: Update survex.com URLs to drop "www.".  Update
	  wxGTK dependency to >= 2.6.0.  Reenable "BuildRequires:" as
	  the issue with building the package on Debian is no longer
	  relevant.  2.6.0 may not actually be required for Survex 1.0.x, but
	  we've not tested with 2.4 in ages, and it's unlikely to still be in
	  use.

Wed Sep 21 00:11:57 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in: Only ask for core wx lib to avoid linking to a load of
	  others we don't use.

Wed Sep 21 00:07:52 GMT 2011  Olly Betts <olly@survex.com>

	* doc/Makefile.am: Factor out DOCBOOK_TO_MAN and SGMLTOOLS to reduce
	  differences with trunk.

Wed Sep 21 00:03:36 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* doc/Makefile.am: Use stampfile to stop unwanted rebuilds of the HTML
	  version of the manual.

Wed Sep 21 00:01:44 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in: Sync some cosmetic changes from trunk.

Tue Sep 20 13:29:11 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/Makefile.am: Remove FIXME which has already been resolved.

Tue Sep 20 13:27:15 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* INSTALL: Update.

Tue Sep 20 13:21:18 GMT 2011  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc: Correctly capitalise "GTK".

Tue Sep 20 13:12:26 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/readval.c: Fix comment typo.

Tue Sep 20 13:11:07 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/netskel.c: In "Unused fixed point" warning, give file and
	  linenumber where the "*fix" occurred.

Tue Sep 20 13:08:15 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* configure.in,src/img.c,src/useful.c,src/useful.h: Use AC_TYPE_INT16_T
	  and AC_TYPE_INT32_T instead of home-brew equivalents.
	* configure.in,src/useful.h: On little-endian architectures, make
	  get16() and get32() inline functions, rather than macros which use 
	  a global variable.
	* src/useful.c: Remove commented out code.

Tue Sep 20 12:58:30 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in: No need for AC_PROG_MAKE_SET when using automake.

Tue Sep 20 12:56:04 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in,lib/Info.plist.in: Add Info.plist stuff for
	  buildmacosx.sh.

Tue Sep 20 12:46:58 GMT 2011  Olly Betts <olly@survex.com>

	* doc/manual.sgml: Sync appropriate changes from trunk.

Tue Sep 20 12:39:41 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* src/listpos.c: In "Station X referred to by *entrance or *export but
	  never used" warning, give file and linenumber where the *entrance or
	  *export occurred.
	* src/listpos.c: In "Station X referred to just once, with an explicit
	  prefix - typo?" warning, give file and linenumber where the *equate
	  occurred.

Tue Sep 20 12:37:25 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* Makefile.am: I can't persuade rpmbuild to work sanely,
	  and people can just as easily build binary RPMs from the source
	  tarball as from the srpm, so just remove the rpm target from the
	  makefile - it's less to have to maintain too.

Tue Sep 20 12:32:47 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* src/wx.h: Add GPL boilerplate to files which were missing it.
	* src/gdtconvert: Add GPL license boilerplate.
	* src/gdtconvert: Add "Generated" comment to output file.

Tue Sep 20 12:27:41 GMT 2011  Olly Betts <olly@survex.com>

	* xvfb-run: Remove script which is no longer used.

Tue Sep 20 12:18:26 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/gfxcore.h: Work around Mac OS X polluting the global namespace
	  with a "Point" class.

Tue Sep 20 12:14:31 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/: Use GETC() and PUTC() everywhere.

Tue Sep 20 12:07:25 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/export.cc: Explicit #include <time.h> for strftime().

Tue Sep 20 12:04:27 GMT 2011  Olly Betts <olly@survex.com>

	* doc/TODO.htm: Partially sync with 1.2.0.

Tue Sep 20 12:00:43 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* lib/Makefile.am: Ship the extra .isl translation files for Innosetup.

Tue Sep 20 11:56:04 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* src/diffpos.c: Handle files with duplicate labels in better - extend
	  generates duplicate labels when it breaks a loop.
	* tests/extend.tst: Enable eswap-break testcase now that diffpos is
	  fixed.

Tue Sep 20 11:36:30 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* doc/index.htm.in,doc/manual.sgml,doc/survex.ent,lib/print.ini,
	  src/printwx.cc,survex.iss.in: Use http://survex.com/ rather than
	  http://www.survex.com/ - the former is the canonical name and
	  www.survex.com just redirects.
	* COPYING,lib/print.ini,src/riscos/armrot.s,tests/: Update FSF address.

Tue Sep 20 11:33:03 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* Makefile.am: Include all the available wxstd.mo files into the
	  Microsoft Windows installer, rather than trying to just include those
	  which we have translations for.  This avoids having to maintain a
	  list of which to include, and gives users translations of wxWidgets
	  messages even if they don't get Survex messages translated.

Tue Sep 20 11:22:37 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* survex.iss.in: Add comment noting that AppVerName isn't required by
	  newer InnoSetup.
	* survex.iss.in: Use http://survex.com/ rather than
	  http://www.survex.com/ - the former is the canonical name and
	  www.survex.com just redirects.

Tue Sep 20 11:18:12 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* doc/HACKING.htm: Update version of InnoSetup used.  Note the packages
	  needed on Debian to build the Microsoft Windows installer.
	* doc/HACKING.htm: Note Debian packages to install for docs.

Tue Sep 20 11:09:30 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* doc/Makefile.am: Write generated man page to a temporary file, then
	  atomically rename, to avoid leaving an empty or partial man page
	  behind if docbook-to-man dies (I managed to ship an empty cad3d.1 in
	  1.1.16).

Tue Sep 20 10:48:35 GMT 2011  Olly Betts <olly@survex.com>

	* src/cavern.c: Drop "non-fatal" from the report of how many errors
	  there were at the end of the run - it just confuses users - we won't
	  even get here if there's a fatal error!

Tue Sep 20 10:44:51 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* src/message.c: 0x2026 (&hellip;): Handle for WINCP1252, and
	  transliterate to '...' for charsets which don't have it.  0x2192
	  (&rarr;): Transliterate to '->' for charsets which don't have it.
	  Handle &Scaron;, &scaron;, &Zcaron;, &zcaron; for WINCP1252.
	* lib/messages.txt: Use '&rarr;' instead of '->' and '&hellip;' instead
	  of '...'.
	* lib/named-entities.txt: Add hellip and rarr.
	* lib/messages.txt: Sync common messages with 1.2.0.

Tue Sep 20 08:20:36 GMT 2011  Olly Betts <olly@survex.com>

	* lib/messages.txt,src/cavern.c: Fix up backport for new cavern -v
	  option by backporting the message it needs too.

Tue Sep 20 08:15:04 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in,doc/Makefile.am,doc/survex.1.in,doc/survex.7.in:
	  Move survex man page to section 7 (since it isn't documenting an
	  actual command).

Tue Sep 20 08:04:52 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/printwx.cc: When using a standard wxID_xxx id with
	  wxButton, use the implicit default label, as the wx documentation
	  recommends.

Tue Sep 20 07:59:41 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/mainfrm.cc: Fix potential reading off end of string - fix from
	  Stuart Bennett.

Tue Sep 20 07:56:18 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in,survex.spec.in: Default to installing docs into
	  /usr/share/doc/survex rather than /usr/doc/survex.

Tue Sep 20 07:46:15 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/aven.cc: Comment improvements.

Tue Sep 20 07:41:25 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* src/printwx.cc: Use stock wx button IDs wxID_PRINT and
	  wxID_PREVIEW where appropriate.
	* src/aven.cc,src/mainfrm.cc,src/mainfrm.h: Use more stock IDs.

Tue Sep 20 07:19:46 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/aventreectrl.cc,src/gfxcore.cc: Don't use deprecated members or
	  methods of wxKeyEvent.

Tue Sep 20 07:11:37 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* tests/: Most tests weren't actually running and testcases (looks like
	  a sh portability issue).  Fixed, and fortunately all tests still
	  pass.
	* tests/extend.tst: Fix to file .espec files when srcdir != builddir.

Tue Sep 20 06:59:39 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* doc/3dformat.htm: Sync from trunk.

Tue Sep 20 06:56:46 GMT 2011  Olly Betts <olly@survex.com>

	* src/printwin.c: Fix C++ comment.

Tue Sep 20 06:52:01 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from trunk:
	* lib/map.png: Remove scan of map which isn't used and we probably
	  don't have rights to redistribute.

Tue Sep 20 06:48:01 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* src/cavern.c: Add --3d-version option to allow the user
	  to specify the version of the 3d format to output.  (ticket#21)

Tue Sep 20 06:44:32 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.1:
	* src/img.c: Only define INT32_T if it isn't already defined (it will
	  be for 1.0.x).

Tue Sep 20 06:36:54 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* configure.in,src/img.c,src/img.h: Sync latest versions of img.c and
	  img.h from trunk, and configure code to define GETC and PUTC macros.

Tue Sep 20 06:28:24 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.0:
	* Makefile.am,doc/Makefile.am: Don't list other .in files explicitly in
	  EXTRA_DIST.

Tue Sep 20 06:25:46 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.1:
	* make_release: Sync useful changes from trunk.

Tue Sep 20 06:12:45 GMT 2011  Olly Betts <olly@survex.com>

	* configure.in: Add AM_PROG_CC_C_O to fix warning.  This change is
	  already on trunk.

Tue Sep 20 06:10:47 GMT 2011  Olly Betts <olly@survex.com>

	* Backport change from 1.2.1:
	* src/avenprcore.h: Declare border as "struct border" rather than as a
	  typedef to avoid a -Wshadow warning.

Tue Sep 20 06:08:01 GMT 2011  Olly Betts <olly@survex.com>

	* Backport changes from 1.2.0:
	* buildmacosx.sh: Sync useful changes from 1.2.0.

Mon Jun 21 17:07:13 GMT 2010  Olly Betts <olly@survex.com>

	* Backport change from 1.1.13:
	* lib/English_GB.isl,lib/Romanian-7-5.1.11.isl: Check in the unofficial
	  i18n files for InnoSetup which we use.

Mon Jun 21 16:45:07 GMT 2010  Olly Betts <olly@survex.com>

	* Backport change from 1.1.13:
	* src/Makefile.am: Use wx-config's --rescomp option to get the command
	  and options needed to turn .rc files into object files.

Mon Jun 21 13:08:37 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,configure.in,make_release: Update for 1.0.40.

Mon Jun 21 11:41:21 GMT 2010  Olly Betts <olly@survex.com>

	* src/img.h: Fix (C) years.

Mon Jun 21 11:41:01 GMT 2010  Olly Betts <olly@survex.com>

	* src/printwx.h: Trim trailing whitespace to better match 1.1.13.

Mon Jun 21 11:33:04 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,src/export.cc: aven: Improve SVG output compatibility.  Put a
	  5mm border around exported SVG files to allow for station markers
	  and non-zero width lines.  Fix crash when exporting as SVG or Sketch
	  if labels or surface data was turned on.  Backports from 1.1.13.

Mon Jun 21 10:41:07 GMT 2010  Olly Betts <olly@survex.com>

	* src/aven.cc: wxWidgets now has a Slovak i18n, so remove fallback
	  to Czech.

Mon Jun 21 10:34:15 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,src/aven.cc: Make error dialog modal (backport from 1.1.13).

Mon Jun 21 10:14:38 GMT 2010  Olly Betts <olly@survex.com>

	* src/: Update FSF address in (C) notices in source files.

Mon Jun 21 10:13:08 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,src/message.c: Remove a signal handler once it has fired to
	  prevent endless (or seemingly endless) cascades of error dialogs.

Mon Jun 21 09:38:11 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,src/message.c: Ignore LANG if it starts with a digit to avoid
	  problems with bogus value for LANG which AutoCAD installation seems
	  to set on MS Windows (backported from 1.1.13).

Mon Jun 21 09:01:46 GMT 2010  Olly Betts <olly@survex.com>

	* Makefile.am,NEWS,survex.iss.in: Backport Microsoft Windows installer
	  improvements from 1.1.13.

Mon Jun 21 08:32:08 GMT 2010  Olly Betts <olly@survex.com>

	* Backport change from 1.1.13:
	* NEWS,src/cad3d.c,src/export.cc: Fix export to SVG when a label
	  contains a '%' character.

Mon Jun 21 06:19:30 GMT 2010  Olly Betts <olly@survex.com>

	* NEWS,buildmacosx.sh,configure.in,desc-aven.txt,doc/manual.sgml,
	  doc/survex.ent,lib/messages.txt,src/aven.cc,src/printwx.cc,
	  src/printwx.h: Say "wxWidgets" instead of "wxWindows" consistently.

Mon Jun 21 02:21:00 GMT 2010  Olly Betts <olly@survex.com>

	* Backport changes from 1.1.13:
	* configure.in,doc/GPL.htm,doc/index.htm.in: Remove HTML version of GPL
	  - just link to the FSF's page.
	* configure.in,doc/Makefile.am,doc/cl2html.pl,doc/index.htm.in: Stop
	  generating an HTML version of the ChangeLog - it's too low level to
	  be of interest to non-developers, and developers can look at the
	  source code.

Thu Jun 17 17:09:21 GMT 2010  Olly Betts <olly@survex.com>

	* doc/3dformat.htm,doc/HACKING.htm,doc/manual.sgml: Sync relevant
	  changes from 1.1.13.

Thu Jun 17 16:25:40 GMT 2010  Olly Betts <olly@survex.com>

	* src/mainfrm.cc,src/wx.h: Fix to compile with wx2.8.

Thu Jun 17 15:44:48 GMT 2010  Olly Betts <olly@survex.com>

	* src/aboutdlg.cc: Fix typo in recent change to report "GTK+ >= 2.6".

Thu Jun 17 15:43:04 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: wxDC::BeginDrawing() and wxDC::EndDrawing() are
	  deprecated in wx2.6 and removed in wx2.8 if you disable 2.6
	  compatibility.  Still needed in wx2.4 for wxmsw so wrap them
	  in wx version checks.

Thu Jun 17 15:42:29 GMT 2010  Olly Betts <olly@survex.com>

	* src/aventreectrl.cc: Fix to compile with wx >= 2.7.

Thu Jun 17 15:36:50 GMT 2010  Olly Betts <olly@survex.com>

	* src/img.c,src/img.h: Update to the version from 1.1.13 so that we
	  can read version 6 .3d files written by newer 1.1.x releases.
	* src/dump3d.c,src/extend.c,src/netskel.c: Set img_output_version to 3
	  before writing out a .3d file for compatibility with older 1.0.x
	  releases.  We don't use any of the newer features, so there's no
	  benefit to using a newer format version.

Wed Jun 16 15:04:03 GMT 2010  Olly Betts <olly@survex.com>

	* src/gfxcore.cc: Initialise m_MouseOutsideCompass and
	  m_MouseOutsideElev to avoid using them potentially uninitialised.

Wed Jun 16 14:41:47 GMT 2010  Olly Betts <olly@survex.com>

	* Backport change from branches/survex-1_1:
	* src/aboutdlg.cc: Add case for "GTK+ >= 2.6".

Wed Jun 16 14:14:11 GMT 2010  Olly Betts <olly@survex.com>

	* configure.in: Backport change to add support for WX_CONFIG as a
	  preferred new replacement for WXCONFIG.  Add wx2.8 and remove
	  wx2.5 (development version) from the list of wx versions to
	  check.

