# @configure_input@
Summary: Cave Surveying Software
Name: @PACKAGE@
Vendor: The Survex Project
Version: @VERSION@
Release: @RELEASE@
Copyright: GPL
Group: Applications/Misc
Source: http://www.survex.com/software/@VERSION@/@PACKAGE@-@VERSION@.tar.gz
URL: http://www.survex.com/
Packager: Olly Betts <olly@survex.com>
BuildRoot: /var/tmp/%{name}-buildroot

%description
@DESC@

%package aven
Summary: Aven viewer for Survex
Group: Applications/Misc
Requires: survex = @VERSION@

%description aven
@AVENDESC@

%package svxedit
Summary: SvxEdit survey data editor for Survex
Group: Applications/Misc
Requires: survex = @VERSION@

%description svxedit
Experimental.

%prep
%setup

%build
./configure --prefix=/usr
make

%install
rm -rf "$RPM_BUILD_ROOT"
mkdir "$RPM_BUILD_ROOT"
make install-strip prefix="$RPM_BUILD_ROOT"/usr
# Rearrange to conform to the FHS
mv "$RPM_BUILD_ROOT"/usr/doc "$RPM_BUILD_ROOT"/usr/share/doc
mv "$RPM_BUILD_ROOT"/usr/man "$RPM_BUILD_ROOT"/usr/share/man

%clean
rm -rf "$RPM_BUILD_ROOT"

%files
%defattr(-,root,root)
%doc @EXTRA_TEXT@
%doc /usr/share/doc/@PACKAGE@
%doc /usr/share/man/man[^1]*
%doc /usr/share/man/man1/[b-rt-zA-Z0-9]*
%doc /usr/share/man/man1/sorterr*
/usr/bin/[b-rt-zA-Z0-9]*
/usr/bin/sorterr
/usr/share/@PACKAGE@/[^i]*
/usr/share/@PACKAGE@/i[^c]*
/usr/share/@PACKAGE@/icons/??.png
/usr/share/@PACKAGE@/icons/???.png
/usr/share/mime-info
%files aven
%defattr(-,root,root)
%doc /usr/share/man/man1/aven*
/usr/bin/aven
/usr/share/@PACKAGE@/icons/????*.png
%files svxedit
%defattr(-,root,root)
%doc /usr/share/man/man1/svxedit*
/usr/bin/svxedit
